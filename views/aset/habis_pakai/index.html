<!DOCTYPE html>
<html lang="id">
  <head>
    <title>Inventory - {{ .Title }}</title>
    {{ template "_head.html" . }}
  </head>
  <body
    id="kt_app_body"
    data-kt-app-layout="dark-sidebar"
    data-kt-app-header-fixed="true"
    data-kt-app-sidebar-enabled="true"
    data-kt-app-sidebar-fixed="true"
    data-kt-app-sidebar-hoverable="true"
    data-kt-app-sidebar-push-header="true"
    data-kt-app-sidebar-push-toolbar="true"
    data-kt-app-sidebar-push-footer="true"
    data-kt-app-toolbar-enabled="true"
    class="app-default"
  >
    <div class="d-flex flex-column flex-root app-root" id="kt_app_root">
      <div class="app-page flex-column flex-column-fluid" id="kt_app_page">
        {{ template "_navbar.html" . }}

        <div class="app-wrapper flex-column flex-row-fluid" id="kt_app_wrapper">
          <div
            id="kt_app_sidebar"
            class="app-sidebar flex-column"
            data-kt-drawer="true"
            data-kt-drawer-name="app-sidebar"
            data-kt-drawer-activate="{default: true, lg: false}"
            data-kt-drawer-overlay="true"
            data-kt-drawer-width="225px"
            data-kt-drawer-direction="start"
            data-kt-drawer-toggle="#kt_app_sidebar_mobile_toggle"
          >
            <div class="app-sidebar-logo px-6" id="kt_app_sidebar_logo">
              <a href="/">
                <h1 class="text-white">INVENTARIS</h1>
              </a>
              <div
                id="kt_app_sidebar_toggle"
                class="app-sidebar-toggle btn btn-icon btn-shadow btn-sm btn-color-muted btn-active-color-primary h-30px w-30px position-absolute top-50 start-100 translate-middle rotate"
                data-kt-toggle="true"
                data-kt-toggle-state="active"
                data-kt-toggle-target="body"
                data-kt-toggle-name="app-sidebar-minimize"
              >
                <i class="ki-duotone ki-black-left-line fs-3 rotate-180">
                  <span class="path1"></span>
                  <span class="path2"></span>
                </i>
              </div>
            </div>

            {{ template "_sidebar.html" . }}

            <div
              class="app-sidebar-footer flex-column-auto pt-2 pb-6 px-6"
              id="kt_app_sidebar_footer"
            >
              <a
                href="https://preview.keenthemes.com/html/metronic/docs"
                class="btn btn-flex flex-center btn-custom btn-primary overflow-hidden text-nowrap px-0 h-40px w-100"
                data-bs-toggle="tooltip"
                data-bs-trigger="hover"
                data-bs-dismiss-="click"
                title="200+ in-house components and 3rd-party plugins"
              >
                <span class="btn-label">Docs & Components</span>
                <i class="ki-duotone ki-document btn-icon fs-2 m-0">
                  <span class="path1"></span>
                  <span class="path2"></span>
                </i>
              </a>
            </div>
          </div>

          <div class="app-main flex-column flex-row-fluid" id="kt_app_main">
            <div class="d-flex flex-column flex-column-fluid">
              <div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
                <div
                  id="kt_app_toolbar_container"
                  class="app-container container-fluid d-flex flex-stack"
                >
                  <div
                    class="page-title d-flex flex-column justify-content-center flex-wrap me-3"
                  >
                    <h1
                      class="page-heading d-flex text-gray-900 fw-bold fs-3 flex-column justify-content-center my-0"
                    >
                      Kategori Aset
                    </h1>

                    <ul
                      class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1"
                    >
                      <li class="breadcrumb-item text-muted">
                        <a href="/" class="text-muted text-hover-primary"
                          >Beranda</a
                        >
                      </li>

                      <li class="breadcrumb-item">
                        <span class="bullet bg-gray-500 w-5px h-2px"></span>
                      </li>

                      <li class="breadcrumb-item text-muted">Aset TIK</li>
                    </ul>
                  </div>

                  <div class="d-flex align-items-center gap-2 gap-lg-3">
                    <a
                      href="/aset/habis-pakai/add"
                      class="btn btn-sm fw-bold btn-primary"
                    >
                      <i class="ki-duotone ki-plus fs-2"></i> Add Aset
                    </a>
                  </div>
                </div>
              </div>

              <div id="kt_app_content" class="app-content flex-column-fluid">
                <div
                  id="kt_app_content_container"
                  class="app-container container-fluid"
                >
                  <div class="row g-5 align-items-center mb-5">
                      <div class="row g-6 mb-6 g-xl-9 mb-xl-9">
                        {{range .aset_tiks}}
                        <div class="col-md-6 col-xxl-4">
                          <div class="card">
                            <div class="card-body p-0 position-relative">
                              <img src="{{.Path}}" alt="image" class="card-img" style="width: 100%; height: 100%; object-fit: cover;" />
                              <!-- Background Overlay -->
                              <div class="position-absolute top-0 start-0 w-100 h-100" style="background: rgba(0, 0, 0, 0.4);"></div>
                              <div class="overlay-content position-absolute top-0 start-0 w-100 h-100 d-flex flex-column justify-content-end p-5">
                                <div class="position-absolute top-0 end-0 m-3">
                                  <button class="btn btn-sm btn-icon btn-light btn-hover-primary" type="button" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end">
                                    <i class="ki-solid ki-dots-horizontal fs-3"></i>
                                  </button>
                                  <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-semibold w-200px py-3" data-kt-menu="true">
                                    <div class="menu-item">
                                      <a class="menu-link" href="#">
                                        <i class="ki-duotone ki-eye fs-2">
                                          <span class="path1"></span>
                                          <span class="path2"></span>
                                          <span class="path3"></span>
                                        </i> Detail
                                      </a>
                                    </div>
                                    <div class="menu-item">
                                      <a class="menu-link" href="/aset/habis-pakai/edit?id={{.Id}}">
                                        <i class="ki-duotone ki-pencil fs-2">
                                          <span class="path1"></span>
                                          <span class="path2"></span>
                                          <span class="path3"></span>
                                          <span class="path4"></span>
                                        </i> Edit
                                      </a>
                                    </div>
                                    <div class="menu-item">
                                      <a class="menu-link text-danger" href="#" data-bs-toggle="modal" data-bs-target="#HapusAset{{.Id}}">
                                        <i class="ki-duotone ki-trash fs-2">
                                          <span class="path1"></span>
                                          <span class="path2"></span>
                                          <span class="path3"></span>
                                          <span class="path4"></span>
                                          <span class="path5"></span>
                                        </i> Hapus
                                      </a>
                                    </div>
                                  </div>
                              </div>
                                <a href="#" class="fs-4 text-white text-hover-primary fw-bold mb-0 text-shadow">{{.Nama_Aset}}</a>
                                <div class="fw-semibold text-white mb-6 text-shadow">{{.Kode_Aset}}</div>
                                <div class="d-flex flex-wrap mb-5">
                                  <div class="border border-dashed border-white rounded min-w-90px py-3 px-4 mx-2 mb-3">
                                    <div class="fs-6 fw-bold text-white text-shadow">
                                      {{ if $.distribusi }} {{ $dist := index $.distribusi .Id }} 
                                      {{ if $dist }}{{ $dist }}{{ else }}0{{ end }}/{{ .Jumlah }}
                                      {{ else }} 0/{{ .Jumlah }} {{.Satuan}} {{ end }}
                                    </div>
                                    <div class="fw-semibold text-white text-shadow">{{.Satuan}}</div>
                                  </div>
                                  <div class="border border-dashed border-white rounded min-w-90px py-3 px-4 mx-2 mb-3">
                                    <div class="fs-6 fw-bold text-white text-shadow">{{formatCurrency .Nilai}}</div>
                                    <div class="fw-semibold text-white text-shadow">per {{.Satuan}}</div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      <!-- Hapus:: Begin Modal -->
                      <div
                        class="modal fade"
                        id="HapusAset{{.Id}}"
                        tabindex="-1"
                        aria-hidden="true"
                      >
                        <div
                          class="modal-dialog modal-dialog-centered mw-650px"
                        >
                          <div class="modal-content">
                            <div class="modal-header">
                              <h2 class="modal-title">Hapus Aset</h2>
                              <div
                                class="btn btn-sm btn-icon btn-active-color-primary"
                                data-bs-dismiss="modal"
                              >
                                <i class="ki-duotone ki-cross fs-1">
                                  <span class="path1"></span>
                                  <span class="path2"></span>
                                </i>
                              </div>
                            </div>
                            <div class="modal-body">
                              <p class="p-3">
                                Apakah anda yakin ingin menghapus aset
                                <strong><i>{{.Nama_Aset}}</i></strong
                                >, dengan kode aset
                                <strong><i>{{.Kode_Aset}}</i></strong
                                >?
                              </p>
                            </div>
                            <div class="modal-footer">
                              <button
                                type="button"
                                class="btn btn-danger"
                                data-bs-dismiss="modal"
                              >
                                <i class="ki-duotone ki-cross fs-5">
                                  <span class="path1"></span>
                                  <span class="path2"></span>
                                  <span class="path3"></span>
                                  <span class="path4"></span>
                                </i>
                                Tidak
                              </button>
                              <a
                                href="/aset/aset-tik/delete?id={{.Id}}"
                                class="btn btn-success"
                              >
                                <i class="ki-duotone ki-check fs-5">
                                  <span class="path1"></span>
                                  <span class="path2"></span>
                                  <span class="path3"></span>
                                  <span class="path4"></span>
                                </i>
                                Ya
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- Hapus:: End Modal -->
                      {{ end }}
                    </div>
                    <ul class="pagination">
                      <!-- Previous Button -->
                      {{if gt .Page 1}}
                      <li class="page-item previous">
                          <a class="page-link page-text" href="?page={{sub .Page 1}}&limit={{.Limit}}">Previous</a>
                      </li>
                      {{else}}
                      <li class="page-item previous disabled">
                          <span class="page-link page-text">Previous</span>
                      </li>
                      {{end}}
                  
                      <!-- Page Number Links -->
                      {{range $i := until .TotalPages}}
                      <li class="page-item {{if eq (add $i 1) $.Page}}active{{end}}">
                          <a href="?page={{add $i 1}}&limit={{$.Limit}}" class="page-link">
                              {{add $i 1}}
                          </a>
                      </li>
                      {{end}}
                  
                      <!-- Next Button -->
                      {{if lt .Page .TotalPages}}
                      <li class="page-item next">
                          <a class="page-link page-text" href="?page={{add .Page 1}}&limit={{.Limit}}">Next</a>
                      </li>
                      {{else}}
                      <li class="page-item next disabled">
                          <span class="page-link page-text">Next</span>
                      </li>
                      {{end}}
                  </ul>     
                </div>
              </div>
            </div>

            {{ template "_footer.html" . }}
          </div>
        </div>
      </div>
    </div>

    {{ template "_js.html" . }}
  </body>
</html>
